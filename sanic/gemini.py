import google.generativeai as genai

# 確保 API 金鑰正確無誤
genai.configure(api_key="AIzaSyChZPbwnQY-JPm7cPU8kSDn3PiO1Amfo2Q")

# 建立模型物件
model = genai.GenerativeModel("gemini-1.5-flash")

# 核心需求
CORE_NEED = """
你是一個新聞分析專家，專注於幫助使用者釐清新聞的真實性，給予查證建議。
核心目標要修改新聞標題、改寫整體新聞,合乎文章內容不誇大 要好好分段 給予分析真實性的小報告
要給評分(1-5滿分五分) 還要給使用者查證建議。
請確保避免冗長的背景描述，並直接進入主題。
"""

# Prompt 模版
def create_prompt(user_query):
    return f"""
    核心需求：
    {CORE_NEED}

    新聞文章：
    {user_query}
    """

# 用戶提供的新聞文章
user_query = """
標題:快訊／尹錫悅上演戒嚴鬧劇！在野6黨赴國會「正式提交總統彈劾案」
南韓總統尹錫悅3日晚間突然宣布戒嚴，經過6個小時的時間，4日凌晨4點半再度發表談話，表示遵循國會投票決定，解除戒嚴，成了史上「最短命戒嚴」，引發外界譁然，目前尹錫悅總統之位搖搖欲墜，在野黨，包含共同民主黨、祖國革新黨、改革新黨、進步黨、基本所得黨、社會民主黨共6黨在當地時間下午2點40分向國會提交尹錫悅的彈劾案。

韓媒報導，此彈劾案的國會全體會議將在5日0時舉行，並在24小時到72小時內進行表決，另外，執政黨民主黨的副黨代表也向議員發布公告，「子時後將召開全體會議，對尹錫悅的彈劾案進行討論，所以議員們在禮拜六（6日）以前要處於緊急待命的狀態」，當地法律規定，需200名以上國會議員贊成才能通過彈劾案。

目前尹錫悅內閣也處於「全體總辭」的狀態，包含副總理兼企劃財政部長崔相穆、副總理兼教育部長李周浩、科學技術情報通信部長劉相任、外交部長趙兌烈、統一部長金暎浩、法務部長朴性載、行政安全部長李祥敏、文化體育觀光部長柳仁村、農林畜產食品部長宋美玲、產業通商資源部長安德根、雇用勞動部長金文洙、國土交通部長朴庠禹、中小企業部長吳姈姝等19名官員已表明辭意。

不僅如此，此前總統室室長、首席祕書官以上等級的參謀，包含總統秘書室長鄭鎮碩、國家安保室市長申源湜、政策室長成泰胤等人將進行辭職，據總統室透露，鄭鎮碩秘書室長上午八點在會議中，向其他參謀們表示「要考慮去留問題了」，據與會者透露，當天的會議在沉痛的氣氛中進行了簡短的會議，只不過辭職後，總統府將陷入癱瘓，尹錫悅是否會受理，仍是未知數。
"""

# 生成 Prompt
prompt = create_prompt(user_query)

# 確保請求中沒有額外的非法 Header
try:
    response = model.generate_content(prompt)
    print(response.text)
except Exception as e:
    print("請求失敗：", e)
